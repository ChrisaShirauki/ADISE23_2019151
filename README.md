# ADISE24_2019151


 Το Link για το project παρακάτω:
https://github.com/ChrisaShirauki/ADISE24_2019151

Η εφαρμογή αυτή δημιουργήθηκε με βάση την εφαρμογή σκάκι που παρουσιάστηκε στο μάθημα της  Ανάπτυξης Διαδικτυακών συστημάτων και εφαρμογών. Το παιχνίδι ονομάζεται Blokus και έχει τα παρακάτω χαρακτηριστικά: 
  1) Είναι ένα επιτραπέζιο παιχνίδι στρατηγικής που σχεδιάστηκε για 2-4 παίκτες. Σκοπός του παιχνιδιού είναι να τοποθετήσεις όσο το δυνατόν περισσότερα από τα κομμάτια σου στον πίνακα
  2) Αποτελείται από ένα πλέγμα (grid) 20x20 κυψελών.Κάθε παίκτης ξεκινά από τη γωνία του πλέγματος και τοποθετεί κομμάτια σε κάθε γύρο.
  3) Κάθε παίκτης έχει 21 κομμάτια, το καθένα με διαφορετικά σχήματα που θυμίζουν Tetris (πολύγωνα). Τα κομμάτια αυτά έχουν σταθερό μέγεθος και είναι ίδια για όλους τους παίκτες των τεσσάρων χρωμάτων ( Κόκκινο, Μπλε, Κίτρινο, Πράσινο).
  4) Το πρώτο κομμάτι κάθε παίκτη πρέπει να τοποθετηθεί σε μία από τις 4 γωνίες του πίνακα 20x20. Κάθε νέο κομμάτι που προστίθεται πρέπει να ακουμπά τουλάχιστον γωνία ή κομμάτι του ίδιου χρώματος,  ενώ κομμάτια του ίδιου χρώματος δεν επιτρέπεται να ακουμπούν πλευρές. Τα κομμάτια διαφορετικών παικτών μπορούν να ακουμπούν οποιοδήποτε σημείο (πλευρές ή γωνίες). Τέλος, όταν ένας παίκτης δεν μπορεί να τοποθετήσει άλλο κομμάτι, σταματά να παίζει.
  5) Νικητής του παιχνιδιού είναι αυτός που έχει τοποθετήσει τα περισσότερα κομμάτια του.

_______________________________________________________________________________________________________________________________________________________________________________________________________________________


Υλοποίηση του Blokus σε διαδικτυακή εφαρμογή:
 
 Όσον αφορά το σχεδιασμό είναι σημαντικό να αναφερθεί πως γίνεται έλγχος κατάστασης παχινιδιού. Συγκεκριμένα υπάρχουν: 

 Α. Οι Καταστάσεις παιχνιδιού:  
	1. INACTIVE.   
	2. INITIALISED.  
	3. STARTED.   
	4. ENDED.       
	5. ABORTED

    ! Αλλάζουν ανάλογα με τις ενέργειες που γίνονται στο παιχνίδι.

Β. AFK Action 
    Κάθε παίκτης όταν έρχεται η σειρά του έχει στη διάθεση του 2 λεπτά για να τοποθετήσει ένα οποιδήποτε κομμάτι.Σε περίπτωση που κάποιος αποχωρεί ή αποσυνδέεται για κάποιο λόγο από το παιχνίδι αυτό τερματίζει αυτόματα και δηλώνει το νικητή. Αυτό υλοποιείται μέσω χρήσης timestamp last_action. Η συγκεκριμένη συνάρτηση ανανεώνεται κάθε φορά που o παίκτης:
                ~ Ξεκινάει νέο παιχνίδι
                ~ Τοποθετεί ένα κομμάτι στο πίνακα.
                ~ Εγκαταλείπει το παιχνίδι ή αποσυνδέται.
                ~ Εώς ότου κάνει pass σε περίπτωση που δεν μπορεί να τοποθετήσει block στον πίνακα.

Γ. Πίνακα με τα 21 blocks όπου γίνεται με τη χρήση ενός λεξικού (dictionary) στην PHP ώστε να αναπαρασταθεί η μορφή του σε πιθανό UI και οι δυνατές περιστροφές του. Το λεξικό αυτό ονομάζεται blocks.php. Ανάλογα με το πως θέλουμε να περιστρέψουμε ένα block έχουμε 4 δυνατές περιστρόφες με τη φορά του ρολογιού. 

!Προσοχή: Δεν έχουν όλα τα πιόνια 4 περιστροφές. Ωστόσο το πρόγραμμαα έχει σχεδιαστεί με τέτοιον τρόπο έτσι ώστε ανάλογα με το νούμερο της περιστροφής να βρίσκει τη σωστή μορφή του block.

Δ. Κάθε φορά που τελείωνει ένα παιχνίδι δεν καθαρίζουμε το πίνακα board. Υπάρχει ένα αντίγραφο που επαναφέρει την αρχική κατάσταση των blocks πριν ξεκινήσει το παιχνίδι μέσω της SQL εντολής REPLACE. Στη βάση έχει δημιουργηθεί ένας πίνακας με όλα τα 81 blocks των 4 παικτών. Κάθε φορά που ο παίκτης τοποθετεί ένα κομμάτι στον board αυτό σβήνεται από το blocks_initial. Σε περίπτωση που ο χρήστης προσπαθεί να παίξει ήδη τοποθετημένο block πετάγεται το Error 400 - Bad Request.


Ε. Επειδή το παιχνίδι παίζεται με 4 παίκτες κάθε φορά που ξεκινάει ένα νέο παιχνίδι μαζί με τους δύο αυθεντικοποιημένους χρήστες τοποθετούνται και 2 computer. Στη συγκεκριμένη εφαρμογή δεν παίζουν κανένα πίονι και απλά κάνουν pass κάθε φορά που έρχεται η σειρά τους.

_____________________________________________________________________________________________________________________________________________________________________________________________________________________

Εξήγηση Λειτουργίας Εφαργμογής : 

>> Ο χρήστης αναζητά να μπει σε ένα room. Εάν το συγκεκριμένο room είναι διαθέσιμο τότε μπαίνει μέσω ενός μοναδικού token και
περιμένει να συνδεθεί δεύτερος χρήστης. Όταν βρεθεί και συνδεθεί με το ίδιο τρόπο ο δεύτερος χρήστης τότε το παιχνίδι ξεκινάει. 

   ▬ Η κατάσταση πριν συνθεθεί ο 2 χρήστης είναι INITIALISED ένω όταν προστεθεί και ο δέυτερος παίκτης αλλάζει σε STARTED.

>> Το παιχνίδι επιλέγει τυχαία ποιος από τους χρήστες θα παίξει πρώτος όταν ξεκινήσει το παιχνίδι. Μόλις παίξει ο πρώτος παίκτης η σειρά ορίζεται ανάλογα με τις θέσεις τους στον πίνακα blocks. Π.Χ Έστω ο πίνακας blocks = [ R , G , B , Y]. Έστω ότι τυχαία ξεκινάει ο μπλε. Μόλις τελείωσει η σειρά του ξεκινάει ο κίτρινος, μέτά ο κόκκινος και τέλος ο πράσινος. Αυτό αλλάζει ανάλογα με το χρώμα που θα επιλεχτεί την πρώτη φορά. Εάν είναι ο πράσινος τότε θα είναι G, B , Y, R  κτλ.


>> Για την τοποθέτηση ενός block στον πίνακα υπάρχει συνάρτηση η οποία αντιστοιχεί το 
κτου λεξικού πίνακα με τις αντίστοιχες γραμμές και στήλες του board. Ειδικότερα: 
  ○ Η συνάρτηση check_placement:

  ○ Η συνάρτηση rotateTableClockwise: Κάθε γραμμή του πίνακα γίνεται στήλη του νέου πίνακα, με την τελευταία γραμμή να γίνεται η πρώτη στήλη.Αυτή η συνάρτηση περιστρέφει έναν δισδιάστατο πίνακα δεξιόστροφα κατά 90 μοίρες.
